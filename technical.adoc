= Technical Documentation for Workout Tracker

This document provides technical details about the Workout Tracker application, a Flask-based web app for tracking workouts and measuring strength.

== Table of Contents
* Technologies Used
    ** Backend
    ** Frontend
* Application Structure
* Database Schema
* Functionality
* Future Plans
* Code
* Dependencies

For regular documentation go link:README.md[HERE]

== Technologies Used

=== Backend:

* **'Flask'**: Python web framework for building web applications.
* **'SQLite'**: Lightweight database for storing application data.

=== Frontend:

* **'HTML/CSS'**: For structuring and styling the user interface.
* **'JavaScript`**`: For adding interactivity to the user interface.

== Application Structure

The application is organized into the following components:

* **'app.py'**: Main Flask application file containing the routes, logic, and database interactions.
* **'templates/'**: Directory containing HTML templates for rendering the user interface.
* **'static/'**: Directory containing static assets like CSS, JavaScript, and images.
* **'strength.py'**: Module containing functions for calculating strength scores and percentiles.
* **'database.py'**: Module containing functions for interacting with the SQLite database.

== Database Schema

The application uses a SQLite database with the following tables:

* **'users'**: Stores user information like username, password, and optional profile data.
* **'exercises'**: Stores a list of exercises with their muscle group and targeted muscle information.
* **'workouts'**: Stores workout records for each user, including the date and exercises performed.

== Functionality

The Workout Tracker application provides the following features:

* **'User Authentication'**: Users can register and log in securely using usernames and passwords.
* **'Workout Tracking'**: Users can record and view their workouts, including the date and exercises performed.
* **'Exercise List'**: Users can browse a list of exercises categorized by muscle group and targeted muscle.
* **'Strength Tracking'**: Users can input their workout data to calculate estimated one-rep maximums and strength scores based on gender and body weight.

== Future Plans

Here are some potential future enhancements for the Workout Tracker application:

* **'Progress Tracking'**: Implement a progress page to visualize workout history and track improvements over time.

* **'User Profile Page`**`: Add a user profile page where users can manage their information and view their workout statistics.

== Code

=== HTML/JS

base.html
```html
<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>{{ subdomain_tag }} - Workout Tracker</title>
        <link rel="icon" href="{{ url_for('static', filename='icon.png') }}" />
        <link
            rel="stylesheet"
            href="{{ url_for('static', filename='style.css') }}"
        />
        <script src="{{ url_for('static', filename='script.js') }}"></script>
    </head>
    <body>
        <div id="header" style="display: flex; justify-content: center">
            <div id="banner" style="margin-left: 60px">
                <img
                    src="{{ url_for('static', filename='logo.png') }}"
                    alt="Banner"
                    style="height: 60px; width: auto"
                />
            </div>
        </div>
        <main id="body">
            {% block main %}{% endblock %}
        </main>
        </div>        
        <div id="sidebar" style="width: 60px; transition: 0.5s">
            <a
                href="javascript:void(0)"
                class="close-btn"
                onclick="toggleSidebar()"
                style="margin-left: 9.5px"
            >
                <svg
                    xmlns="http://www.w3.org/2000/svg"
                    class="icon icon-tabler icon-tabler-menu-2"
                    width="40"
                    height="40"
                    viewBox="0 0 24 24"
                    stroke-width="1.5"
                    stroke="currentColor"
                    fill="none"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                >
                    <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                    <path d="M4 6l16 0" />
                    <path d="M4 12l16 0" />
                    <path d="M4 18l16 0" />
                </svg>
            </a>
            <div id="sdb">
                <div id="sdb1">
                    <div class="sidebar-content">
                        <a href="{{ url_for('home') }}">
                            Home
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="icon icon-tabler icon-tabler-home"
                                width="40"
                                height="40"
                                viewBox="0 0 24 24"
                                stroke-width="1.5"
                                stroke="currentColor"
                                fill="none"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                            >
                                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                                <path d="M5 12l-2 0l9 -9l9 9l-2 0" />
                                <path d="M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7" />
                                <path d="M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6" />
                            </svg>
                        </a>
                    </div>
                    <div class="sidebar-content">
                        <a href="{{ url_for('exercises') }}">
                            Exercises
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="icon icon-tabler icon-tabler-barbell"
                                width="40"
                                height="40"
                                viewBox="0 0 24 24"
                                stroke-width="1.5"
                                stroke="currentColor"
                                fill="none"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                            >
                                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                                <path d="M2 12h1" />
                                <path d="M6 8h-2a1 1 0 0 0 -1 1v6a1 1 0 0 0 1 1h2" />
                                <path
                                    d="M6 7v10a1 1 0 0 0 1 1h1a1 1 0 0 0 1 -1v-10a1 1 0 0 0 -1 -1h-1a1 1 0 0 0 -1 1z"
                                />
                                <path d="M9 12h6" />
                                <path
                                    d="M15 7v10a1 1 0 0 0 1 1h1a1 1 0 0 0 1 -1v-10a1 1 0 0 0 -1 -1h-1a1 1 0 0 0 -1 1z"
                                />
                                <path d="M18 8h2a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-2" />
                                <path d="M22 12h-1" />
                            </svg>
                        </a>
                    </div>
                    <div class="sidebar-content">
                        <a href="{{ url_for('workout') }}">
                            Workout
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="icon icon-tabler icon-tabler-notes"
                                width="40"
                                height="40"
                                viewBox="0 0 24 24"
                                stroke-width="1.5"
                                stroke="currentColor"
                                fill="none"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                            >
                                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                                <path
                                    d="M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z"
                                />
                                <path d="M9 7l6 0" />
                                <path d="M9 11l6 0" />
                                <path d="M9 15l4 0" />
                            </svg>
                        </a>
                    </div>
                    <div class="sidebar-content">
                        <a href="{{ url_for('progress') }}">
                            Progress
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="icon icon-tabler icon-tabler-trending-up"
                                width="40"
                                height="40"
                                viewBox="0 0 24 24"
                                stroke-width="1.5"
                                stroke="currentColor"
                                fill="none"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                            >
                                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                                <path d="M3 17l6 -6l4 4l8 -8" />
                                <path d="M14 7l7 0l0 7" />
                            </svg>
                        </a>
                    </div>
                    <div class="sidebar-content">
                        <a href="{{ url_for('strength') }}">
                            Strength
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="icon icon-tabler icon-tabler-weight"
                                width="40"
                                height="40"
                                viewBox="0 0 24 24"
                                stroke-width="1.5"
                                stroke="currentColor"
                                fill="none"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                            >
                                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                                <path d="M12 6m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" />
                                <path
                                    d="M6.835 9h10.33a1 1 0 0 1 .984 .821l1.637 9a1 1 0 0 1 -.984 1.179h-13.604a1 1 0 0 1 -.984 -1.179l1.637 -9a1 1 0 0 1 .984 -.821z"
                                />
                            </svg>
                        </a>
                    </div>
                </div>
                <div id="sdb2">
                    <div class="sidebar-content">
                        <a href="{{ url_for('profile') }}">
                            <b><p>{{ session['username'] }}</p></b>
                            {% if session['profile_picture'] != None %}
                            <img
                                src="{{ session['profile_picture'] }}"
                                alt="Profile Picture"
                                style="width: 40px; height: 40px; border-radius: 50%;"
                                id="profile-pic"
                            />
                            {% else %}
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="icon icon-tabler icon-tabler-user-circle"
                                width="40"
                                height="40"
                                viewBox="0 0 24 24"
                                stroke-width="1.5"
                                stroke="currentColor"
                                fill="none"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                            >
                                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                                <path d="M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0" />
                                <path d="M12 10m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0" />
                                <path
                                    d="M6.168 18.849a4 4 0 0 1 3.832 -2.849h4a4 4 0 0 1 3.834 2.855"
                                />
                            </svg>
                            {% endif %}
                        </a>
                    </div>
                    <p style="font-size: 7px;">&nbsp;</p>
                    <div class="sidebar-content">
                        <a href="{{ url_for('logout') }}">
                            Logout
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                class="icon icon-tabler icon-tabler-logout"
                                width="40"
                                height="40"
                                viewBox="0 0 24 24"
                                stroke-width="1.5"
                                stroke="currentColor"
                                fill="none"
                                stroke-linecap="round"
                                stroke-linejoin="round"
                            >
                                <path stroke="none" d="M0 0h24v24H0z" fill="none" />
                                <path
                                    d="M14 8v-2a2 2 0 0 0 -2 -2h-7a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h7a2 2 0 0 0 2 -2v-2"
                                />
                                <path d="M9 12h12l-3 -3" />
                                <path d="M18 15l3 -3" />
                            </svg>
                        </a>
                    </div>
                </div>
            </div>
        </div>
        {% block scripts %}{% endblock %}
    </body>
</html>
```
This is an HTML template file used in a Flask web application. Flask uses a templating engine called Jinja2, which allows you to inject data into your HTML.

The file is structured as a standard HTML document with `<!DOCTYPE html>`, `<html>`, `<head>`, and `<body>` tags.

In the `<head>` section, there are several meta tags and links to stylesheets and JavaScript files. The `{{ url_for('static', filename='style.css') }}` is a Flask function that generates a URL to the static files in your application.

The `<body>` section contains the main content of the webpage. It includes a header with an image, a main section, and a sidebar. The `{% block main %}{% endblock %}` is a Jinja2 block tag. It allows you to define sections in your template that child templates can override.

The sidebar contains several links, each with an icon and text. The `{{ url_for('...') }}` is another Flask function that generates a URL to the '...' route in your application.

The `{% if session['profile_picture'] != None %}` is a Jinja2 conditional statement. It checks if the user has a profile picture. If they do, it displays the picture. If they don't, it displays a default icon.

The `{% block scripts %}{% endblock %}` is another Jinja2 block tag. It allows you to inject additional JavaScript files into your template from child templates.

The `{{ session['username'] }}` is a Flask session variable. It stores data that you want to persist between requests. In this case, it's used to store the username of the currently logged in user.

home.js
```javascript
function bmi() {
    var weight = document.getElementById("weight").value;
    var height = document.getElementById("height").value;
    var bmi = weight / (((height / 100) * height) / 100);
    document.getElementById("bmi").innerHTML = bmi.toFixed(2);
}
```
This is a JavaScript file used in a Flask web application. It contains a function called `bmi()` that calculates the Body Mass Index (BMI) based on the weight and height entered by the user.

The function retrieves the weight and height values from the input fields with the IDs "weight" and "height". It then calculates the BMI using the formula `weight / (((height / 100) * height) / 100)`.

The `toFixed(2)` method is used to round the BMI value to two decimal places.

Finally, the function updates the innerHTML of an element with the ID "bmi" to display the calculated BMI value.

profile.js
```javascript
var image_preview = document.getElementById("img_preview");
var image_input = document.getElementById("profile_picture_link");

image_input.addEventListener("input", function () {
    image_preview.src = this.value;
});
```
This is a JavaScript file used in a Flask web application. It contains an event listener that listens for changes to an input field with the ID "profile_picture_link".

When the input field changes, the event listener updates the `src` attribute of an image element with the ID "img_preview" to display the selected image.

The `image_preview` variable stores a reference to the image element, and the `image_input` variable stores a reference to the input field.

The `addEventListener()` method is used to attach an event handler to the input field. The event handler function updates the `src` attribute of the image element to display the selected image.

script.js
```javascript
function toggleSidebar() {
    const sidebar = document.getElementById("sidebar");

    if (sidebar.style.width === "60px") {
        sidebar.style.width = "170px";
    } else {
        sidebar.style.width = "60px";
    }
}
```
This is a JavaScript file used in a Flask web application. It contains a function called `toggleSidebar()` that toggles the width of a sidebar element between 60px and 170px.

The function retrieves the sidebar element using `document.getElementById("sidebar")`. It then checks the current width of the sidebar. If the width is 60px, it sets the width to 170px. If the width is 170px, it sets the width to 60px.

The function is typically called when a user clicks on a button or link to expand or collapse the sidebar.

workout.js
```javascript
// Set the current date as the default value for the date input
document.getElementById("dateInput").valueAsDate = new Date();

function addSetsFields() {
    const sets = document.getElementById("setsInput").value;
    const setsFieldsContainer = document.getElementById("setsFieldsContainer");
    const setsFields = document.createElement("div");
    setsFields.className = "setsFields";

    // Initialize the innerHTML with the first set
    setsFields.innerHTML =
        'Set 1 <label for="repsInput1">Reps:</label><input type="number" id="repsInput1" min="1" value="1"><label for="weightInput1">Weight:</label><input type="number" id="weightInput1" min="0" value="0">kg';

    // Add the remaining sets
    for (let i = 1; i < sets; i++) {
        const setNumber = i + 1;
        setsFields.innerHTML += `<br>Set ${setNumber} <label for="repsInput${setNumber}">Reps:</label><input type="number" id="repsInput${setNumber}" min="1" value="1"><label for="weightInput${setNumber}">Weight:</label><input type="number" id="weightInput${setNumber}" min="0" value="0">kg`;
    }

    // Add the save button
    setsFields.innerHTML +=
        '<br><button onclick="saveRepsWeight()">Save</button>';

    // Clear the container and add the new fields
    setsFieldsContainer.innerHTML = "";
    setsFieldsContainer.appendChild(setsFields);
}

function saveRepsWeight() {
    const sets = document.getElementById("setsInput").value;
    const ListRepWeight = [];

    // Collect the reps and weight for each set
    for (let i = 1; i <= sets; i++) {
        const reps = document.getElementById(`repsInput${i}`).value;
        const weight = document.getElementById(`weightInput${i}`).value;
        ListRepWeight.push([reps, weight]);
    }

    // Clear the sets fields and display the exercise list
    const setsFieldsContainer = document.getElementById("setsFieldsContainer");
    setsFieldsContainer.innerHTML = "";

    const exerciseListContainer = document.getElementById("exercise-list");
    const exercise = document.getElementById("exerciseSelect").value;
    const exerciseList = document.createElement("div");
    exerciseList.className = "exerciseList";

    const List2 = ListRepWeight.map(
        (set, index) => `Set ${index + 1}: ${set[0]} reps, ${set[1]}kg`
    );

    exerciseList.innerHTML = `${exercise}<br> ${List2.join(", <br>")}`;
    exerciseListContainer.appendChild(exerciseList);
}

function saveWorkout() {
    const date = document.getElementById("dateInput").value;
    const exerciseListContainer = document.getElementById("exercise-list");
    const exerciseList =
        exerciseListContainer.getElementsByClassName("exerciseList");
    const exercises = [];
    let name = document.getElementById("workoutName").value;

    if (name === "") {
        name = "Workout";
    }

    for (let index = 0; index < exerciseList.length; index++) {
        const exerciseText = exerciseList[index].innerText;
        const exerciseParts = exerciseText.split("\n");
        const exerciseName = exerciseParts[0];
        const sets = exerciseParts.slice(1).map((setText) => {
            const setTextParts = setText.split(", ");
            const reps = parseInt(setTextParts[0].split(" ")[2]);
            const weight = parseInt(setTextParts[1].split(" ")[0]);
            return [reps, weight];
        });
        exercises.push({ [exerciseName]: sets });
    }

    const dateInput = document.getElementById("date");
    const exercisesInput = document.getElementById("exercises");
    dateInput.value = date;
    exercisesInput.value = JSON.stringify({ [name]: exercises });

    document
        .getElementById("return-form")
        .getElementsByTagName("input")[2]
        .click();
}
```
This is a JavaScript file used in a Flask web application. It contains several functions that handle the dynamic addition of workout sets, saving reps and weight data, and saving workout data.

The `addSetsFields()` function dynamically adds input fields for reps and weight based on the number of sets selected by the user. It creates a new `div` element with the class "setsFields" and populates it with input fields for each set. It also adds a "Save" button to save the reps and weight data.

The `saveRepsWeight()` function collects the reps and weight data for each set and saves it to a list. It then displays the exercise list with the reps and weight data for each set.

The `saveWorkout()` function saves the workout data, including the date and exercise list, to hidden input fields in a form. It then submits the form to save the workout data to the database.

The functions use DOM manipulation to create and update elements on the page dynamically based on user input.


=== Python

ALL THE REST OF CODE FRAGMENTS WILL BE ADDED AS SOON AS I FINISH THEM FULLY.

== Dependencies

- Flask: Web framework for building the application.
- SQLite: Database management system for storing user, exercise, and workout data.
- Werkzeug: Library for password hashing and verification.
- Secrets: Library for generating secure random tokens.
- JSON: Data interchange format for storing strength standards.
- Numpy: Library for numerical computing and interpolation.
- Scipy: Library for scientific computing and interpolation.